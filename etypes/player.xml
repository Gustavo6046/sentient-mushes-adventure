<?xml version="1.0"?>
<entitytype name="Player" id="player">
    <functions>
        <function name="player_special">
            def player_special(entity, player, args):
                place = args[0]
                
                if not entity.world.place(place):
                    player.print_out("{}: No such place!".format(entity), place=entity.place)
                    return
                    
                player.print_out("{}: Performing the Velociraptor's run.".format(entity), place=entity.place)
                    
                for _ in range(3):
                    if player.place == place:
                        break
                        
                    player.call('pathmove', place, 0)
        </function>
    </functions>

    <base>
        <attr name="obituary" value="'{killer} dug a couple holes out of {victim} with his bare hands!'" />
        
        <!-- kinetic (movement & combat) attributes -->
        <attr name="speed" value="0.4" /> <!-- likelihood to evade enemy attacks, from 0 to 1 -->
        <attr name="moveSpeed" value="0.8" /> <!-- chance, from 0 to 1, for a succesful tile move -->
        <attr name="isPlayer" value="True" />
    </base>
    
    <default>
        <declare name="weapon" />
        <attribute name="weaponUses" value="{}" />
        <attr name="mush" value="True" />
        
        <import name="creatureattr" href="attributes/creatureattr.xml" />
        <import name="player" href="attributes/player.xml" />
    </default>
    
    <systems>
        <system name="pinata_drops" href="systems/pinata_drops.py" />
        <system name="drops" href="systems/drops.py" />
    </systems>
    
    <itemdefs>
        <!-- Materials -->
        <item name="stick" />
        <item name="pebble" />
        <item name="leaf" />
        <item name="stray" />
        
        <item name="rope">
            <flag name="craftable" />
            <attr key="recipe" value="{ 'stray': 3 }" />
        </item>
        
        <item name="plank">
            <flag name="craftable" />
            <attr key="recipe" value="{ 'stick': 5 }" />
            <attr key="prerequisites" value="set('flint')" /> <!-- ingredients that aren't consumed in the process -->
        </item>
        
        <!-- Weapons -->
        <item name="flint sword">
            <flag name="weapon" />
            <attr key="uses" value="70" />
            <attr key="minDamage" value="25" />
            <attr key="maxDamage" value="60" />
            <attr key="recipe" value="{ 'stick': 2, 'flint': 1, 'straw': 3 }" />
        </item>
        
        <item name="flint sword">
            <flag name="weapon" />
            <attr key="poison" value="5" />
            <attr key="uses" value="70" />
            <attr key="minDamage" value="25" />
            <attr key="maxDamage" value="60" />
            <attr key="recipe" value="{ 'flint sword': 1, 'poison sac': 1 }" />
            
        </item>
        
        <item name="steel sword">
            <flag name="weapon" />
            <attr key="uses" value="125" />
            <attr key="minDamage" value="40" />
            <attr key="maxDamage" value="80" />
        </item>
        
        <item name="grenades">
            <flag name="weapon" />
            <attr key="uses" value="8" />
            <attr key="minDamage" value="40" />
            <attr key="maxDamage" value="80" />
        </item>
    </itemdefs>
    
    <variants>
        <variant name="Velociraptor Player" id="p_raptor">
            <attr name="size" value="0.9" />
            <attr name="health" value="90" />
            <attr name="weight" value="70" /> <!-- in kilograms -->
            <attr name="dangerousness" value="90" />
            <attr name="punchDamage" value="20" /> <!-- would've been called lacerateDamage or slashDamage -->
            <attr name="obituary" value="&quot;{victim} was teared in plural parts by {killer}'s velociraptor claws!&quot;" />
        </variant>
    </variants>
</entitytype>